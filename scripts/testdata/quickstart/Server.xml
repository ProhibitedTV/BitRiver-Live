<?xml version="1.0" encoding="utf-8"?>
<Server version="10">
    <Name>OvenMediaEngine</Name>
    <Type>origin</Type>
    <IP>0.0.0.0</IP>
    <PrivacyProtection>false</PrivacyProtection>
    <StunServer>stun.l.google.com:19302</StunServer>

    <!-- Server-level bind rewritten from BITRIVER_OME_* -->
    <Bind>
        <IP>0.0.0.0</IP>
        <Port>9000</Port>
        <TLSPort>9443</TLSPort>
    </Bind>

    <Modules>
        <Control>
            <Server>
                <Listeners>
                    <TCP>
                        <Enable>true</Enable>
                        <Bind>0.0.0.0</Bind>
                        <Port>9000</Port>
                    </TCP>
                </Listeners>
                <Authentication>
                    <AutoRegister>true</AutoRegister>
                    <AllowAnonymousUser>false</AllowAnonymousUser>
                    <AllowAnonymousReferrer>false</AllowAnonymousReferrer>
                    <User>
                        <ID>admin</ID>
                        <Password>password</Password>
                    </User>
                </Authentication>
            </Server>
        </Control>

        <Host>
            <VirtualHosts>
                <VirtualHost>
                    <Name>default</Name>
                    <Host>*</Host>
                    <Origin>
                        <App>
                            <Name>live</Name>
                        </App>
                    </Origin>
                </VirtualHost>
            </VirtualHosts>
        </Host>

            <APIServer>
                <Enable>true</Enable>
                <Port>8081</Port>
                <AccessToken>BITRIVER_OME_API_TOKEN_PLACEHOLDER</AccessToken>
                <!-- Keep this non-empty; quickstart rewrites from BITRIVER_OME_API_TOKEN. -->
            </APIServer>
    </Modules>

    <Applications>
        <Application>
            <Name>live</Name>
            <Type>live</Type>

            <Outputs>
                <OutputProfiles>
                    <OutputProfile>
                        <Name>copy_passthrough</Name>
                        <OutputStreams>
                            <OutputStream>
                                <Name>copy</Name>
                                <Video>
                                    <Codec>copy</Codec>
                                </Video>
                                <Audio>
                                    <Codec>copy</Codec>
                                </Audio>
                            </OutputStream>
                        </OutputStreams>
                    </OutputProfile>
                </OutputProfiles>

                <LLHLS>
                    <SegmentDuration>6</SegmentDuration>
                    <PartDuration>1</PartDuration>
                    <SegmentCount>5</SegmentCount>
                    <PartCount>3</PartCount>
                    <PreloadHint>true</PreloadHint>
                    <AdditionalPlaylist>true</AdditionalPlaylist>
                </LLHLS>
            </Outputs>

            <Publishers>
                <WebRTC>
                    <Enable>true</Enable>
                    <OutputProfile>copy_passthrough</OutputProfile>
                </WebRTC>
                <LLHLS>
                    <Enable>true</Enable>
                    <OutputProfile>copy_passthrough</OutputProfile>
                </LLHLS>
            </Publishers>

            <Providers>
                <RTMP>
                    <Enable>true</Enable>
                </RTMP>
                <WebRTC>
                    <Enable>true</Enable>
                </WebRTC>
            </Providers>
        </Application>
    </Applications>
</Server>
