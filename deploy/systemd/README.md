# Systemd units

The manifests in this directory run the BitRiver Live API alongside the Next.js viewer. Install the Go API binary under `/opt/bitriver-live` (or adjust paths to taste) and the viewer build artefacts under `/opt/bitriver-viewer`.

1. Copy `.next/standalone`, `.next/static`, and `public/` from `web/viewer` into `/opt/bitriver-viewer` after running `npm run build`.
2. Create an environment file `/opt/bitriver-viewer/.env` with production settings, for example:

   ```ini
   NEXT_PUBLIC_API_BASE_URL=
   NEXT_VIEWER_BASE_PATH=/viewer
   PORT=3000
   HOSTNAME=0.0.0.0
   ```

3. Point the Go API at the viewer runtime by setting `BITRIVER_VIEWER_ORIGIN=http://127.0.0.1:3000` in `/opt/bitriver-live/.env` (the installer generated by the control centre can append this line).
4. Enable both units:

   ```bash
   sudo systemctl enable --now bitriver-live.service
   sudo systemctl enable --now bitriver-viewer.service
   ```

The Go API proxies `/viewer` requests to the Next.js server so the admin SPA and public directory share a single origin and cookie jar.
