# Copy this file to ../.env and replace the placeholder values before starting the stack.
# docker compose will fail fast if any required credential remains empty.

# Core service configuration
# Set the image tags to the release version you extracted (for example, v1.2.3).
# SRS is pinned to v5.0.185 by default to match the systemd units; bump it only
# after validating a newer upstream tag. OME defaults to 0.15.10; update
# BITRIVER_OME_IMAGE_TAG alongside any schema changes.
BITRIVER_LIVE_IMAGE_TAG=v1.2.3
BITRIVER_VIEWER_IMAGE_TAG=v1.2.3
BITRIVER_SRS_CONTROLLER_IMAGE_TAG=v1.2.3
BITRIVER_TRANSCODER_IMAGE_TAG=v1.2.3
BITRIVER_SRS_IMAGE_TAG=v5.0.185
BITRIVER_OME_IMAGE_TAG=0.15.10
BITRIVER_LIVE_PORT=8080
BITRIVER_LIVE_STORAGE_DRIVER=postgres
BITRIVER_LIVE_MODE=production
BITRIVER_LIVE_ADDR=:8080
BITRIVER_LIVE_ALLOW_SELF_SIGNUP=false
# Compose derives BITRIVER_LIVE_POSTGRES_DSN from the credentials below when left unset.
# Uncomment to override with a custom connection string.
# BITRIVER_LIVE_POSTGRES_DSN=postgres://${BITRIVER_POSTGRES_USER}:${BITRIVER_POSTGRES_PASSWORD}@postgres:5432/${BITRIVER_POSTGRES_DB}?sslmode=disable
# Rotate these before production to keep them in sync.
BITRIVER_POSTGRES_DB=brlive_app
BITRIVER_POSTGRES_USER=brlive_app
BITRIVER_POSTGRES_PASSWORD=P0stgres-Example!
BITRIVER_REDIS_PASSWORD=R3dis-Example!
BITRIVER_LIVE_POSTGRES_MAX_CONNS=15
BITRIVER_LIVE_POSTGRES_MIN_CONNS=5
BITRIVER_LIVE_POSTGRES_ACQUIRE_TIMEOUT=5s
BITRIVER_LIVE_POSTGRES_MAX_CONN_LIFETIME=30m
BITRIVER_LIVE_SESSION_STORE=postgres
BITRIVER_LIVE_CHAT_QUEUE_DRIVER=redis
BITRIVER_LIVE_CHAT_QUEUE_REDIS_ADDR=redis:6379
BITRIVER_LIVE_CHAT_QUEUE_REDIS_STREAM=bitriver-live-chat
BITRIVER_LIVE_CHAT_QUEUE_REDIS_GROUP=bitriver-live-api
# Postgres is internal-only by default. When you need to expose it to the host, set
# COMPOSE_PROFILES=postgres-host and optionally override BITRIVER_POSTGRES_HOST_PORT.
# Restrict firewall rules before enabling the profile.
BITRIVER_POSTGRES_HOST_PORT=5432
BITRIVER_VIEWER_ORIGIN=http://viewer:3000
BITRIVER_SRS_API=http://srs-controller:1985
BITRIVER_OME_API=http://ome:8081
BITRIVER_OME_BIND=0.0.0.0
BITRIVER_OME_IP=0.0.0.0
BITRIVER_OME_SERVER_PORT=9000
BITRIVER_OME_SERVER_TLS_PORT=9443
BITRIVER_TRANSCODER_API=http://transcoder:9000
# Required: point this at the HTTP origin end users can reach for transcoder outputs.
# Use the public URL exposed by your CDN, reverse proxy, or load balancer (for example,
# https://cdn.example.com/hls). When testing a single host, publish the transcoder
# directory through a routable hostname or IP (not localhost) and set that address here.
# docker compose and deploy/check-env.sh refuse to start when this value is empty or
# loopback-only so operators don’t accidentally advertise an unreachable origin.
BITRIVER_TRANSCODER_PUBLIC_BASE_URL=https://cdn.example.com/hls
BITRIVER_TRANSCODER_HOST_PORT=9001
BITRIVER_INGEST_HEALTH=/healthz
BITRIVER_SRS_CONTROLLER_PORT=1986
SRS_CONTROLLER_UPSTREAM=http://srs:1985/api/
NEXT_PUBLIC_API_BASE_URL=https://stream.example.com/api
NEXT_VIEWER_BASE_PATH=/viewer
NEXT_PUBLIC_VIEWER_URL=https://stream.example.com/viewer

# Required credentials – replace every sample before bringing the stack online
BITRIVER_LIVE_ADMIN_EMAIL=admin@stream.example.com
BITRIVER_LIVE_ADMIN_PASSWORD=Sup3rSecureAdmin!
BITRIVER_SRS_TOKEN=srs-secure-token-example
BITRIVER_OME_USERNAME=ome-operator
BITRIVER_OME_PASSWORD=OME-Example-Pass!
BITRIVER_TRANSCODER_TOKEN=transcoder-secure-token-example
# Keep this in sync with BITRIVER_REDIS_PASSWORD unless you override the API credential separately.
BITRIVER_LIVE_CHAT_QUEUE_REDIS_PASSWORD=R3dis-Example!
